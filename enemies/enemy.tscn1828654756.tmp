[gd_scene load_steps=16 format=3 uid="uid://44ysp4oerx7w"]

[ext_resource type="Script" uid="uid://dkft8vk4onp6c" path="res://enemies/Enemy.gd" id="1_7frlh"]
[ext_resource type="Texture2D" uid="uid://j5mukloyyq2l" path="res://assets/sprites/test_character2_sheet_walk_32_32.png" id="1_fw1ev"]
[ext_resource type="PackedScene" uid="uid://cxhrkcxsscc4s" path="res://components/hurtbox.tscn" id="3_orwns"]
[ext_resource type="Script" uid="uid://buhqnmqvlv4a" path="res://scripts/StateMachine.gd" id="4_07tka"]
[ext_resource type="Script" uid="uid://cvo1pauymmmac" path="res://enemies/EnemyIdleState.gd" id="5_3t1x0"]
[ext_resource type="Script" uid="uid://bkk0s5ra6d4qc" path="res://enemies/EnemyChaseState.gd" id="6_3t1x0"]
[ext_resource type="Script" uid="uid://bo8dgf6jinn0v" path="res://enemies/EnemyAttackState.gd" id="7_epsnb"]

[sub_resource type="AtlasTexture" id="AtlasTexture_7frlh"]
atlas = ExtResource("1_fw1ev")
region = Rect2(0, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_orwns"]
atlas = ExtResource("1_fw1ev")
region = Rect2(32, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_a6vjd"]
atlas = ExtResource("1_fw1ev")
region = Rect2(64, 0, 32, 32)

[sub_resource type="AtlasTexture" id="AtlasTexture_07tka"]
atlas = ExtResource("1_fw1ev")
region = Rect2(96, 0, 32, 32)

[sub_resource type="SpriteFrames" id="SpriteFrames_3t1x0"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_7frlh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_orwns")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_a6vjd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_07tka")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_epsnb"]

[sub_resource type="CircleShape2D" id="CircleShape2D_epsnb"]

[sub_resource type="CircleShape2D" id="CircleShape2D_4w5fm"]

[node name="Enemy" type="CharacterBody2D"]
script = ExtResource("1_7frlh")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_3t1x0")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_epsnb")

[node name="Hurtbox" parent="." instance=ExtResource("3_orwns")]

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("initial_state")]
script = ExtResource("4_07tka")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="StateMachine"]
script = ExtResource("5_3t1x0")

[node name="Chase" type="Node" parent="StateMachine"]
script = ExtResource("6_3t1x0")

[node name="Attack" type="Node" parent="StateMachine"]
script = ExtResource("7_epsnb")

[node name="DetectionArea" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="DetectionArea"]
scale = Vector2(8, 8)
shape = SubResource("CircleShape2D_epsnb")

[node name="AttackRange" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackRange"]
scale = Vector2(3, 3)
shape = SubResource("CircleShape2D_4w5fm")
